<!-- Etiqueta de estilos, contiene los estilos que son aplicados en el html, reduce código redundante y facilidad de lectura -->
<style>
   /* Estilo del título del proyecto, le da sombreado luminoso */
   .span-title-nav {
      text-shadow: 0px 0px 15px #969696eb;
   }

   /* Estilo para el logo en la parte superior izquierda de la barra de navegación, le da un tamaño mediano */
   .logo-nav {
      width: 35px;
   }

   /* Estilo para los iconos de la barra de navegación, le da un tamaño pequeño adecuado a las palabras que están en la barra de navegación */
   .icons-nav-width {
      width: 20px;
   }
</style>
<!-- ===================================================== -->
<!-- Navbar es el contenedor de la barra de navegación, acá es donde el usuario a travéz de botones
puede iniciar sesión, registrarse o redireccionarse al inicio. -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark py-1 d-flex align-items-center">
   <div class="container-fluid">
      <!-- ===================================================== -->
      <a class="navbar-brand" routerLink="/home">
         <!-- Se toma en una url el logo de ViveRegistro para ser mostrado en el nav -->
         <img class="mb-1 logo-nav" src="../../../assets/logo/logo-light.svg" alt="Logo ilustrativo de VR">
         <span class="span-title-nav">
            ViveRegistro
         </span>
      </a>
      <!-- Este botón sirve para que cuando esté en dispositivos móviles se muestre un icono de lista indicando que existe una lista de contenido
      Esto se muestra cuando está en resoluciones pequeñas como tablets o celulares -->
      <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse"
         data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
         aria-label="Toggle navigation">
         <span class="navbar-toggler-icon"></span>
      </button>
      <!-- ===================================================== -->
      <!-- Este es el contenido que en dispositivos con resolución pequeña se muestra como lista vertical si se acciona el anterior botón -->
      <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
         <!-- ===================================================== -->
         <!-- El *ngIf sirve para identificar si el usuario está logueado, si está logueado, la etiqueta que tenga esta función será
         mostrada en pantalla siempre y cuando esté logueado el usuario -->
         <ul class="navbar-nav" *ngIf="user$ | async as user; else login">
            <li class="nav-item mx-0 mx-lg-2">
               <!-- El routerLinkActive sirve para añadir una clase (estilo) para identiicar en cuál enlace está el usuario para
               diferenciarlo de los demás enlaces -->
               <a class="nav-link" [routerLink]="['/home']" [routerLinkActive]="['active']">
                  <span>
                     <!-- En el nav se usa iconología de acuerdo al texto, en este caso la etiqueta <i></i> sirve como contenedor del icono referente
                     al inicio -->
                     <!-- <i class="fas fa-home text-white me-1"></i> -->
                     <img src="../../../assets/imagenes/home.png" class="mb-1 mr-1 icons-nav-width"
                        alt="Icono que ilustra el inicio">
                     Inicio
                  </span>
               </a>
            </li>
            <li class="nav-item mx-0 mx-lg-2">
               <!-- El routerLink es una función que siendo precionado el enlace te localiza en la ruta a la que estés dando click -->
               <a class="nav-link" [routerLink]="['/crud']" [routerLinkActive]="['active']">
                  <span>
                     <!-- <i class="fas fa-user-cog text-white me-1"></i> -->
                     <img src="../../../assets/imagenes/gestionar.png" class="mb-1 mr-1 icons-nav-width"
                        alt="Icono que ilustra la acción gestionar usuarios">
                     Gestionar Usuarios
                  </span>
               </a>
            </li>
            <li class="nav-item dropdown mx-0 mx-lg-2">
               <!-- En la etiqueta <a href=""></a> está el id="" que hace referencia al contenido a mostrar como lista -->
               <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                  data-bs-toggle="dropdown" aria-expanded="true">
                  <span>
                     <!-- <i class="fas fa-temperature-high text-white me-1"></i> -->
                     <img src="../../../assets/imagenes/sensor.png" class="mb-1 mr-1 icons-nav-width"
                        alt="Icono que ilustra el tipo de sensor">
                     Tipo de Sensor
                  </span>
               </a>
               <!-- Este es el contenido a mostrar de la anterior mención -->
               <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <li>
                     <a class="dropdown-item" [routerLink]="['/humedad']" [routerLinkActive]="['active']">
                        <span>
                           <!-- <i class="fas fa-tint text-dark me-1"></i> -->
                           <img src="../../../assets/imagenes/humedad.png" class="mb-1 mr-1 icons-nav-width"
                              alt="Icono que ilustra la humedad">
                           Humedad
                        </span>
                     </a>
                  </li>
                  <li>
                     <a class="dropdown-item" [routerLink]="['/temperatura']" [routerLinkActive]="['active']">
                        <span>
                           <!-- <i class="fas fa-thermometer-full text-dark me-1"></i> -->
                           <img src="../../../assets/imagenes/temperatura.png" class="mb-1 mr-1 icons-nav-width"
                              alt="Icono que ilustra la temperatura">
                           Temperatura
                        </span>
                     </a>
                  </li>
               </ul>
            </li>
            <li class="nav-item mx-0 mx-lg-2">
               <a class="nav-link" [routerLink]="['/plantas']" [routerLinkActive]="['active']">
                  <span>
                     <!-- <i class="fas fa-seedling text-white me-1"></i> -->
                     <img src="../../../assets/imagenes/plantas.png" class="mb-1 mr-1 icons-nav-width"
                        alt="Icono que ilustra las plantas">
                     Plantas
                  </span>
               </a>
            </li>
            <li class="nav-item mx-0 mx-lg-2">
               <a class="nav-link">
                  <span>
                     <!-- <i class="fas fa-user-tag text-white me-1"></i> -->
                     <img src="../../../assets/imagenes/role.png" class="mb-1 mr-1 icons-nav-width"
                        alt="Icono que ilustra el rol que pertenece al usuario">
                     <!-- Esta sentencia trae el dato rol del usuario logueado y este se muestra en pantalla con su
                     respectivo icono -->
                     Rol: {{user.role}}
                  </span>
               </a>
            </li>

         </ul>
         <!-- ===================================================== -->
         <ul class="navbar-nav ms-auto" *ngIf="user$ | async as user">
            <li class="nav-item dropdown mx-0 mx-lg-2">
               <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                  data-bs-toggle="dropdown" aria-expanded="true">
                  <span>
                     <!-- <i class="fas fa-user text-white me-1"></i> -->
                     <img src="../../../assets/imagenes/configuracion.png" class="mb-1 mr-1 icons-nav-width"
                        alt="Icono que ilustra el usuario">
                     <!-- Esta sentencia trae el dato email del usuario logueado y este se muestra en pantalla con su
                     respectivo icono -->
                     {{user.email}}
                  </span>
               </a>
               <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <li>
                     <a class="dropdown-item" [routerLink]="['/perfil/', user.uid]" [routerLinkActive]="['active']">
                        <span>
                           <!-- <i class="fas fa-user-edit text-dark me-1"></i> -->
                           <img src="../../../assets/imagenes/perfil.png" class="mb-1 mr-1 icons-nav-width"
                              alt="Icono que ilustra la sección perfil">
                           Perfil
                        </span>
                     </a>
                  </li>
                  <li>
                     <a class="dropdown-item" [routerLink]="['/manual']" [routerLinkActive]="['active']">
                        <span>
                           <!-- <i class="fas fa-user-edit text-dark me-1"></i> -->
                           <img src="../../../assets/imagenes/manual.png" class="mb-1 mr-1 icons-nav-width"
                              alt="Icono que ilustra el manual de usuario">
                           Manual Usuario
                        </span>
                     </a>
                  </li>
                  <li>
                     <hr class="dropdown-divider">
                  </li>
                  <li>
                     <!-- Por último la función cerrar sesión, que es para indicar que siendo accionada, quedas fuera del sistema interno -->
                     <a class="dropdown-item" (click)="onLogout()">
                        <span>
                           <!-- <i class="fas fa-sign-out-alt text-dark me-1"></i> -->
                           <img src="../../../assets/imagenes/cerrar.png" class="mb-1 mr-1 icons-nav-width"
                              alt="Icono que ilustra la acción de cerrar sesión">
                           Cerrar sesión
                        </span>
                     </a>
                  </li>
               </ul>
            </li>
         </ul>
         <!-- ===================================================== -->
         <!-- Si el usuario no se ha logueado, esta es la sección que será mostrada -->
         <ng-template #login>
            <!-- ===================================================== -->
            <ul class="navbar-nav">
               <li class="nav-item mx-0 mx-lg-2">
                  <a class="nav-link" routerLink="/home">
                     <span>
                        <img src="../../../assets/imagenes/home.png" class="mb-1 mr-1 icons-nav-width"
                           alt="Icono que ilustra el inicio">
                        Inicio
                     </span>
                  </a>
               </li>
            </ul>
            <!-- ===================================================== -->
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
               <li class="nav-item mx-0 mx-lg-2 my-1 my-lg-0">
                  <a class="btn btn-primary btn-sm text-white rounded-pill px-3" routerLink="/login">
                     <span>
                        <img src="../../../assets/imagenes/iniciar-sesion.png" class="mr-1 icons-nav-width"
                           alt="Icono que ilustra la acción de ingresar al sistema">
                        Iniciar sesión
                     </span>
                  </a>
               </li>
               <li class="nav-item mx-0 mx-lg-2 my-1 my-lg-0">
                  <a class="btn btn-dark btn-sm text-white rounded-pill px-3" routerLink="/register">
                     <span>
                        <img src="../../../assets/imagenes/registrarse.png" class="mr-1 icons-nav-width"
                           alt="Icono que ilustra la acción de registrarse en el sistema">
                        Regístrate
                     </span>
                  </a>
               </li>
            </ul>
            <!-- ===================================================== -->
         </ng-template>
         <!-- ===================================================== -->
      </div>
   </div>
</nav>